<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --dark-bg: #121212;
            --dark-card: #1e1e1e;
            --text-primary: #ffffff;
            --text-secondary: #adb5bd;
            --border-color: #333;
            --glow-primary: #007bff;
            --glow-danger: #dc3545;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--dark-bg);
            background-image: url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%232c2c2c" fill-opacity="0.1"%3E%3Cpath d="M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');
            color: var(--text-primary);
        }

        .gradient-text {
            background: -webkit-linear-gradient(45deg, #4e54c8, #8f94fb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }

        .table-container {
            background-color: var(--dark-card);
            border: 1px solid var(--border-color);
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 0 40px rgba(0,0,0,0.5);
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }
        .table-header h2 {
            font-weight: 600;
        }

        .btn-gradient-add {
            background-image: linear-gradient(to right, #1D976C 0%, #93F9B9 51%, #1D976C 100%);
            background-size: 200% auto;
            color: #111;
            font-weight: 600;
            border: none;
            border-radius: 50px;
            padding: 0.7rem 1.5rem;
            transition: 0.5s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .btn-gradient-add:hover {
            background-position: right center;
            color: #000;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(29, 151, 108, 0.3);
        }

        .table {
            border-collapse: separate;
            border-spacing: 0;
            color: var(--text-secondary);
        }
        .table thead th {
            border: none;
            font-weight: 600;
            letter-spacing: 0.5px;
            padding: 1rem;
            text-transform: uppercase;
            font-size: 0.8rem;
            color: var(--text-primary);
            border-bottom: 2px solid var(--border-color);
        }

        .table tbody tr {
            transition: background-color 0.2s ease, transform 0.2s ease;
        }
        .table tbody tr:hover {
            background-color: rgba(255,255,255, 0.03);
            transform: scale(1.01);
        }
        .table tbody td {
            vertical-align: middle;
            padding: 1.25rem 1rem;
            border: none;
            border-bottom: 1px solid var(--border-color);
        }
        .table tbody tr:last-child td {
            border-bottom: none;
        }

        /* Action Buttons */
        .btn-action {
            border-radius: 50px;
            padding: 0.4rem 0.8rem;
            font-size: 0.75rem;
            font-weight: 500;
            transition: all 0.3s ease;
            background: transparent;
            border: 1px solid;
        }
        .btn-action-edit {
            color: var(--glow-primary);
            border-color: var(--glow-primary);
        }
        .btn-action-edit:hover {
            background-color: var(--glow-primary);
            color: #fff;
            box-shadow: 0 0 10px var(--glow-primary);
        }
        .btn-action-delete {
            color: var(--glow-danger);
            border-color: var(--glow-danger);
        }
        .btn-action-delete:hover {
            background-color: var(--glow-danger);
            color: #fff;
            box-shadow: 0 0 10px var(--glow-danger);
        }

        .table-dark {
            --bs-table-bg: #212529;
            --bs-table-striped-bg: #2c3034;
            --bs-table-hover-bg: #32383e;
            color: var(--text-primary);
            border-radius: 0.75rem; /* Bo tròn góc */
            overflow: hidden;      /* Ẩn các phần thừa để bo tròn hoạt động */
        }

    </style>
</head>
<body>
<div class="container mt-5 mb-5">

    <div class="text-center mb-5">
        <h1 class="gradient-text display-4">Management Page</h1>
        <p class="text-secondary fs-5">Welcome, <span th:text="${session.acc.phone}" style="color: #8f94fb; font-weight: bold;"></span></p>
    </div>

    <div class="table-container">

        <div class="table-header">
            <h2 class="mb-0 fs-4">Sony Products List</h2>
            <a class="btn btn-gradient-add" th:if="${session.acc.roleId == 1}" th:href="@{/product/add}">
                <i class="fas fa-plus me-2"></i>Add Product
            </a>
        </div>

        <p th:if="${productList == null or productList.isEmpty()}">No Products Found.</p>

        <div class="table-responsive" th:if="${productList != null and !productList.isEmpty()}">
            <table class="table table-striped table-hover table-dark">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Product Name</th>
                    <th>Price</th>
                    <th>Stock</th>
                    <th>Create At</th>
                    <th>Category</th>
                    <th th:if="${session.acc.roleId == 1}">Actions</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="p : ${productList}">
                    <td th:text="${p.productId}" class="fw-bold" style="color:#fff;"></td>
                    <td th:text="${p.productName}" style="color:#fff; font-weight: 500;"></td>
                    <td th:text="${p.price}"></td>
                    <td th:text="${p.stock}"></td>
                    <td th:text="${p.createAt}"></td>
                    <td th:text="${p.category.cateName}"></td>
                    <td th:if="${session.acc.roleId == 1}">
                        <a th:href="@{/product/{id}(id=${p.productId})}" class="btn btn-action btn-action-edit me-1">
                            <i class="fas fa-edit me-1"></i>Edit
                        </a>
                        <a th:onclick="return confirm('Are you sure?')" th:href="@{/product/{id}/delete(id=${p.productId})}" class="btn btn-action btn-action-delete">
                            <i class="fas fa-trash me-1"></i>Delete
                        </a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
</body>
</html>
